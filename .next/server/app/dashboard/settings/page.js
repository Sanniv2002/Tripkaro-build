(()=>{var e={};e.id=455,e.ids=[455],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},37332:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>c,routeModule:()=>m,tree:()=>u});var s=t(73137),a=t(54647),i=t(4183),n=t.n(i),d=t(71775),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(r,o);let l=s.AppPageRouteModule,u=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,99533)),"/home/sanniv/expense/app/dashboard/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/sanniv/expense/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,36598)),"/home/sanniv/expense/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],c=["/home/sanniv/expense/app/dashboard/settings/page.tsx"],f="/dashboard/settings/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new l({definition:{kind:a.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},51398:(e,r,t)=>{let s={"27789748d4028595e8f7c4f335d85448c4eb53ad":()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.fetchTrips),db7e1d758c705a2e3689b038b7253fafa458c5cd:()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.addTrip),"6875be3eb71c47789351b1ab13a7f89fc0f02960":()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.joinRoom),"519527161853f61403e27d0e4fedaddf7716aac6":()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.getTripDetails),ce63b2e88fe9f05aae1cdf2555fa938e6e894aa6:()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.getTimeline),f6068f201973c2497e9a34d1821ef41ced4dd163:()=>Promise.resolve().then(t.bind(t,97798)).then(e=>e.getTripName),d45e06675ff8828d6ebb5fbae706449df520e09d:()=>Promise.resolve().then(t.bind(t,8070)).then(e=>e.fetchUserDetails),"35fc9e6de469d285253d28e7a99e73d432efedd8":()=>Promise.resolve().then(t.bind(t,8070)).then(e=>e.updateUser)};async function a(e,...r){let t=await s[e]();return t.apply(null,r)}e.exports={"27789748d4028595e8f7c4f335d85448c4eb53ad":a.bind(null,"27789748d4028595e8f7c4f335d85448c4eb53ad"),db7e1d758c705a2e3689b038b7253fafa458c5cd:a.bind(null,"db7e1d758c705a2e3689b038b7253fafa458c5cd"),"6875be3eb71c47789351b1ab13a7f89fc0f02960":a.bind(null,"6875be3eb71c47789351b1ab13a7f89fc0f02960"),"519527161853f61403e27d0e4fedaddf7716aac6":a.bind(null,"519527161853f61403e27d0e4fedaddf7716aac6"),ce63b2e88fe9f05aae1cdf2555fa938e6e894aa6:a.bind(null,"ce63b2e88fe9f05aae1cdf2555fa938e6e894aa6"),f6068f201973c2497e9a34d1821ef41ced4dd163:a.bind(null,"f6068f201973c2497e9a34d1821ef41ced4dd163"),d45e06675ff8828d6ebb5fbae706449df520e09d:a.bind(null,"d45e06675ff8828d6ebb5fbae706449df520e09d"),"35fc9e6de469d285253d28e7a99e73d432efedd8":a.bind(null,"35fc9e6de469d285253d28e7a99e73d432efedd8")}},25922:(e,r,t)=>{Promise.resolve().then(t.bind(t,64593))},64593:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var s=t(60080),a=t(83894),i=t(66558),n=t(19098),d=t(68384),o=t(9885),l=t(71085),u=t(23161),c=t(33478);let f=i.RV,p=o.createContext({}),m=({...e})=>s.jsx(p.Provider,{value:{name:e.name},children:s.jsx(i.Qr,{...e})}),x=()=>{let e=o.useContext(p),r=o.useContext(h),{getFieldState:t,formState:s}=(0,i.Gc)(),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...a}},h=o.createContext({}),b=o.forwardRef(({className:e,...r},t)=>{let a=o.useId();return s.jsx(h.Provider,{value:{id:a},children:s.jsx("div",{ref:t,className:(0,u.cn)("space-y-2",e),...r})})});b.displayName="FormItem";let g=o.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:i}=x();return s.jsx(c._,{ref:t,className:(0,u.cn)(a&&"text-destructive",e),htmlFor:i,...r})});g.displayName="FormLabel";let v=o.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:i,formMessageId:n}=x();return s.jsx(l.g7,{ref:r,id:a,"aria-describedby":t?`${i} ${n}`:`${i}`,"aria-invalid":!!t,...e})});v.displayName="FormControl";let y=o.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=x();return s.jsx("p",{ref:t,id:a,className:(0,u.cn)("text-sm text-muted-foreground",e),...r})});y.displayName="FormDescription";let j=o.forwardRef(({className:e,children:r,...t},a)=>{let{error:i,formMessageId:n}=x(),d=i?String(i?.message):r;return d?s.jsx("p",{ref:a,id:n,className:(0,u.cn)("text-sm font-medium text-destructive",e),...t,children:d}):null});j.displayName="FormMessage";var w=t(49424),q=t(97052);t(70391),t(53009);var P=t(61324),N=(0,P.$)("d45e06675ff8828d6ebb5fbae706449df520e09d"),_=(0,P.$)("35fc9e6de469d285253d28e7a99e73d432efedd8"),E=t(87502);let U=n.Ry({username:n.Z_().min(2,{message:"Username must be at least 2 characters."}).max(30,{message:"Username must not be longer than 30 characters."})});function S(){let[e,r]=(0,o.useState)(null),[t,n]=(0,o.useState)(!1),{toast:l}=(0,E.pm)(),c=(0,o.useCallback)(async()=>{let{success:e,user:t}=await N();e&&t&&r(t)},[]);(0,o.useEffect)(()=>{c()},[]);let p=(0,i.cI)({resolver:(0,a.F)(U),defaultValues:{username:e?.viewName||""}});(0,o.useEffect)(()=>{e&&p.setValue("username",e.viewName||"")},[e,p]);let x=async r=>{if(e){n(!0);let e=await _(r.username);e.success&&l({title:"Profile updated successfully",description:"Your profile has been updated."}),n(!1)}};return e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Settings"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your account settings and preferences."})]}),(0,s.jsxs)(q.Zb,{children:[(0,s.jsxs)(q.Ol,{children:[s.jsx(q.ll,{children:"Profile"}),s.jsx(q.SZ,{children:"Update your profile information."})]}),s.jsx(q.aY,{children:s.jsx(f,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(x),className:"space-y-8",children:[s.jsx(m,{control:p.control,name:"username",render:({field:e})=>(0,s.jsxs)(b,{children:[s.jsx(g,{children:"Username"}),s.jsx(v,{children:s.jsx(w.I,{placeholder:"Your name",...e})}),s.jsx(y,{children:"This is your public display name."}),s.jsx(j,{})]})}),s.jsx(d.z,{type:"submit",disabled:t,children:t?"Updating...":"Update Profile"})]})})})]})]}):s.jsx("div",{className:"flex justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,u.cn)("animate-spin"),children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})})}},8070:(e,r,t)=>{"use strict";t.r(r),t.d(r,{fetchUserDetails:()=>u,updateUser:()=>c});var s=t(57016),a=t(77728),i=t(9901),n=t(69568),d=t(88490),o=t(96276);let l="true"===process.env.ENABLE_CACHE;async function u(){let e=await (0,i.getServerSession)(n.authOptions);if(!e?.user?.id)throw Error("User not authenticated");let r=`user:${e.user.id}:details`;try{if(l){let e=await d.default.get(r);if(e)return{success:!0,user:JSON.parse(e)}}let t=await a.default.user.findUnique({where:{id:e?.user.id},select:{id:!0,name:!0,email:!0,viewName:!0,avatar:!0}});if(!t)return{success:!1,message:"User not found"};return l&&await d.default.set(r,JSON.stringify(t),"EX",600),{success:!0,user:t}}catch(e){return console.error("Error fetching user:",e),{success:!1,message:"Failed to fetch user details"}}}async function c(e){let r=await (0,i.getServerSession)(n.authOptions);if(!r?.user?.id)throw Error("User not authenticated");try{let t=await a.default.user.findUnique({where:{id:r?.user.id}});if(!t)throw Error("User not found");let s=await a.default.user.update({where:{id:r?.user.id},data:{viewName:e}});if(l){let e=`user:${r.user.id}:details`;await d.default.del(e)}return{success:!0,user:s}}catch(e){return console.error("Error updating user:",e),{success:!1,message:"Failed to update user"}}}(0,o.ensureServerEntryExports)([u,c]),(0,s.createActionProxy)("d45e06675ff8828d6ebb5fbae706449df520e09d",null,u),(0,s.createActionProxy)("35fc9e6de469d285253d28e7a99e73d432efedd8",null,c)},99533:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=t(17536);let a=(0,s.createProxy)(String.raw`/home/sanniv/expense/app/dashboard/settings/page.tsx`),{__esModule:i,$$typeof:n}=a,d=a.default,o=d}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[650,690,262,955,396,408,684,384,838,789,52],()=>t(37332));module.exports=s})();