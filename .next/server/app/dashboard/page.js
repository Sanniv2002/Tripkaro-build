(()=>{var e={};e.id=702,e.ids=[702],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},22142:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>x,routeModule:()=>m,tree:()=>d});var r=t(73137),a=t(54647),i=t(4183),n=t.n(i),l=t(71775),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=r.AppPageRouteModule,d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,68156)),"/home/sanniv/expense/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/sanniv/expense/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,36598)),"/home/sanniv/expense/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["/home/sanniv/expense/app/dashboard/page.tsx"],u="/dashboard/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new c({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3612:(e,s,t)=>{Promise.resolve().then(t.bind(t,75037))},75037:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(60080),a=t(97052),i=t(23161),n=t(517),l=t(91672),o=t(47634),c=t(57114),d=t(9885);function x({trips:e}){let s=(0,c.useRouter)(),[t,x]=(0,d.useState)(!0),[u,p]=(0,d.useState)([]);(0,d.useEffect)(()=>{if(e){let s=[...e].sort((e,s)=>new Date(s.startDate).getTime()-new Date(e.startDate).getTime());p(s),x(!1)}},[e]);let m=e=>{s.push(`dashboard/trip/${e}`)};return t?r.jsx("div",{className:"flex justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,i.cn)("animate-spin"),children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Your Trips"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u?.map(e=>r.jsx(a.Zb,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>m(e.id),children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsx("h3",{className:"text-3xl font-semibold",children:e.name})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(n.Z,{className:"mr-2 h-4 w-4"}),r.jsxs("span",{children:[new Date(e.startDate).toLocaleDateString()," -"," ",new Date(e.endDate).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(l.Z,{className:"mr-2 h-4 w-4"}),r.jsxs("span",{children:[e.participants?.length," participants"]})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),r.jsxs("span",{children:["Trip Code: ",e.roomCode]})]})]}),r.jsxs("div",{className:"pt-2",children:[e.expenses?.length>0?r.jsx("p",{className:"text-xl font-bold",children:i.xG(e.expenses.reduce((e,s)=>e+s.amount,0))}):r.jsx("p",{className:"text-xl font-bold",children:"No expenses yet"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Total expenses"})]})]})},e.id))})]})}var u=t(82694),p=t(50007),m=t(71163);function h({metrics:e,loading:s}){return(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Total Expenses"}),r.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(a.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s?"---":`${(0,i.xG)(e.totalExpense)}`})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Active Trips"}),r.jsx(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(a.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s?"---":e.activeTripsCount})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Total Participants"}),r.jsx(l.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s?"---":e.totalParticipants}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all trips"})]})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Average Per Trip"}),r.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s?"---":`${(0,i.xG)(e.averageCostPerActiveTrip)}`}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on active trips"})]})]})]})}var j=t(74284),f=t(28516),g=t(95291),v=t(47493);function b(){let[e,s]=(0,d.useState)({totalExpense:0,activeTripsCount:0,totalParticipants:0,averageParticipantsPerTrip:0}),[t,a]=(0,g.FV)(v.T),[i,n]=(0,d.useState)(!0),l=(0,c.useRouter)(),o=(0,j.useSession)();return"unauthenticated"===o.status&&l.push("/"),(0,d.useEffect)(()=>{(async function(){try{let e=await (0,f.F9)();s(e.metrics),console.log(e),a(e.trips)}catch(e){console.error("Error fetching trips:",e.message)}finally{n(!1)}})()},[]),(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx(h,{metrics:e,loading:i}),r.jsx(x,{trips:t})]})}},68156:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=t(17536);let a=(0,r.createProxy)(String.raw`/home/sanniv/expense/app/dashboard/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[650,690,262,955,396,587,684,384,838,789,348,52],()=>t(22142));module.exports=r})();